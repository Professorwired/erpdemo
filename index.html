<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Unified Social Inbox — Modern SaaS</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<script src="https://unpkg.com/lucide@latest"></script>

<style>
:root {
  /* Monochrome Palette */
  --bg-app: #f4f4f5;       /* Zinc-100 */
  --bg-panel: #ffffff;
  --bg-hover: #e4e4e7;     /* Zinc-200 */
  --border: #d4d4d8;       /* Zinc-300 */
  
  --text-main: #000000;    /* Pure Black */
  --text-muted: #52525b;   /* Zinc-600 */
  --text-light: #a1a1aa;   /* Zinc-400 */

  --primary: #18181b;      /* Zinc-900 (Nearly Black) */
  --primary-light: #f4f4f5;/* Light gray for active backgrounds */
  --primary-hover: #000000;
  
  --accent: #71717a;       /* Medium Gray */
  --success: #16a34a;      /* Green pop */
  --danger: #dc2626;       /* Red pop */

  --radius-sm: 0px;        /* Sharp edges for a "brutalist" look */
  --radius-md: 4px;
  --radius-lg: 8px;
  
  --shadow-sm: 0 1px 0 0 #000; /* Hard shadow lines */
  --shadow-md: 4px 4px 0 0 #000; /* Brutalist shadow offset */
}
/* --- Base --- */
* { box-sizing: border-box; outline: none; }
body {
  margin: 0; padding: 0;
  background-color: var(--bg-app);
  color: var(--text-main);
  font-family: 'Inter', sans-serif;
  height: 100vh;
  overflow: hidden;
  font-size: 14px;
}

/* --- Layout --- */
.app-container {
  display: grid;
  grid-template-columns: 260px 1fr 380px;
  height: 100vh;
  max-width: 1600px;
  margin: 0 auto;
  background: var(--bg-app);
}

/* --- Sidebar (Left) --- */
.sidebar {
  background: var(--bg-panel);
  border-right: 1px solid var(--border);
  display: flex;
  flex-direction: column;
  padding: 20px 16px;
  gap: 24px;
}

.brand {
  display: flex;
  align-items: center;
  gap: 12px;
  padding-left: 8px;
  margin-bottom: 8px;
}
.brand-logo {
  width: 36px; height: 36px;
  background: linear-gradient(135deg, var(--primary), var(--accent));
  border-radius: 10px;
  display: flex; align-items: center; justify-content: center;
  color: white;
}

.menu-section h3 {
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--text-muted);
  font-weight: 600;
  margin: 0 0 10px 8px;
}

.nav-item {
  display: flex; align-items: center; justify-content: space-between;
  padding: 10px 12px;
  border-radius: var(--radius-sm);
  cursor: pointer;
  color: var(--text-muted);
  transition: all 0.2s;
  font-weight: 500;
}
.nav-item:hover { background: var(--bg-hover); color: var(--text-main); }
.nav-item.active { background: var(--primary-light); color: var(--primary); }
.nav-item-left { display: flex; align-items: center; gap: 10px; }
.badge {
  background: var(--bg-app);
  border: 1px solid var(--border);
  padding: 2px 8px;
  border-radius: 12px;
  font-size: 11px;
  font-weight: 600;
}

/* --- Main Inbox (Middle) --- */
.main-feed {
  display: flex;
  flex-direction: column;
  background: var(--bg-app); /* Slightly off-white */
  border-right: 1px solid var(--border);
}

.top-bar {
  background: var(--bg-panel);
  height: 70px;
  border-bottom: 1px solid var(--border);
  display: flex; align-items: center; justify-content: space-between;
  padding: 0 20px;
}
.search-wrapper {
  position: relative;
  width: 300px;
}
.search-wrapper input {
  width: 100%;
  padding: 10px 10px 10px 36px;
  border-radius: var(--radius-sm);
  border: 1px solid var(--border);
  background: var(--bg-app);
  font-size: 13px;
  transition: border 0.2s;
}
.search-wrapper input:focus { border-color: var(--primary); background: white; }
.search-icon { position: absolute; left: 10px; top: 10px; color: var(--text-light); width: 16px; }

.feed-list {
  flex: 1;
  overflow-y: auto;
  padding: 16px;
  display: flex; flex-direction: column; gap: 10px;
}

.conv-card {
  background: var(--bg-panel);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  padding: 16px;
  display: flex; gap: 14px;
  cursor: pointer;
  transition: transform 0.1s, box-shadow 0.2s;
  position: relative;
}
.conv-card:hover {
  transform: translateY(-1px);
  box-shadow: var(--shadow-sm);
  border-color: #cbd5e1;
}
.conv-card.unread { border-left: 4px solid var(--primary); }
.conv-card.active { background: #f8fafc; border-color: var(--primary); }

.avatar {
  width: 44px; height: 44px;
  border-radius: 12px;
  background: #e2e8f0;
  display: flex; align-items: center; justify-content: center;
  font-weight: 700; color: var(--text-muted);
  position: relative;
  flex-shrink: 0;
}
.platform-badge {
  position: absolute;
  bottom: -4px; right: -4px;
  width: 20px; height: 20px;
  border-radius: 50%;
  background: white;
  display: flex; align-items: center; justify-content: center;
  border: 2px solid white;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.conv-content { flex: 1; min-width: 0; }
.conv-header { display: flex; justify-content: space-between; margin-bottom: 4px; }
.conv-name { font-weight: 600; font-size: 15px; color: var(--text-main); }
.conv-time { font-size: 12px; color: var(--text-light); }
.conv-preview {
  color: var(--text-muted);
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
  font-size: 13px;
}
.tags-row { display: flex; gap: 6px; margin-top: 8px; }
.mini-tag {
  font-size: 11px; padding: 2px 6px; border-radius: 4px;
  background: var(--bg-app); color: var(--text-muted);
  border: 1px solid var(--border);
}

/* --- Detail View (Right) --- */
.detail-panel {
  background: var(--bg-panel);
  display: flex; flex-direction: column;
}

.detail-header {
  height: 70px;
  border-bottom: 1px solid var(--border);
  display: flex; align-items: center; justify-content: space-between;
  padding: 0 20px;
}

.btn-icon {
  width: 36px; height: 36px;
  border-radius: 8px;
  border: 1px solid var(--border);
  background: white;
  color: var(--text-muted);
  display: flex; align-items: center; justify-content: center;
  cursor: pointer;
  transition: all 0.2s;
}
.btn-icon:hover { background: var(--bg-hover); color: var(--text-main); }

.chat-container {
  flex: 1;
  background: #f8fafc;
  padding: 20px;
  overflow-y: auto;
  display: flex; flex-direction: column; gap: 16px;
}

.message-group { display: flex; flex-direction: column; gap: 4px; max-width: 85%; }
.message-group.in { align-self: flex-start; }
.message-group.out { align-self: flex-end; align-items: flex-end; }

.bubble {
  padding: 12px 16px;
  border-radius: 18px;
  font-size: 14px;
  line-height: 1.5;
  position: relative;
  box-shadow: var(--shadow-sm);
}
.in .bubble {
  background: white;
  border: 1px solid var(--border);
  color: var(--text-main);
  border-top-left-radius: 4px;
}
.out .bubble {
  background: var(--primary);
  color: white;
  border-top-right-radius: 4px;
}
.msg-meta { font-size: 11px; margin-top: 4px; color: var(--text-light); opacity: 0.8; }

.composer-area {
  padding: 16px 20px;
  border-top: 1px solid var(--border);
  background: white;
}
.input-box {
  background: var(--bg-app);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  padding: 4px;
  display: flex; flex-direction: column;
}
.input-box textarea {
  width: 100%; border: none; background: transparent;
  padding: 10px; resize: none; min-height: 50px;
  font-family: inherit; font-size: 14px;
}
.input-actions {
  display: flex; justify-content: space-between; padding: 6px 10px;
  align-items: center;
}
.btn-primary {
  background: var(--primary); color: white;
  border: none; padding: 8px 16px; border-radius: 8px;
  font-weight: 600; cursor: pointer; display: flex; align-items: center; gap: 6px;
  transition: background 0.2s;
}
.btn-primary:hover { background: var(--primary-hover); }

/* --- Lead Info Card (Top Right) --- */
.lead-snapshot {
  padding: 20px;
  border-bottom: 1px solid var(--border);
  background: white;
}
.lead-header { display: flex; align-items: center; gap: 14px; }
.lead-lg-avatar {
  width: 56px; height: 56px;
  background: linear-gradient(135deg, #e2e8f0, #cbd5e1);
  border-radius: 16px;
  display: flex; align-items: center; justify-content: center;
  font-size: 20px; font-weight: 700; color: var(--text-muted);
}
.lead-stats {
  display: grid; grid-template-columns: 1fr 1fr; gap: 12px;
  margin-top: 16px;
}
.stat-box {
  padding: 10px; border: 1px solid var(--border);
  border-radius: 8px;
}
.stat-label { font-size: 11px; color: var(--text-light); text-transform: uppercase; }
.stat-val { font-weight: 600; color: var(--text-main); margin-top: 4px; }

/* Modals */
.modal-overlay {
  position: fixed; inset: 0; background: rgba(15,23,42,0.4);
  backdrop-filter: blur(2px);
  display: none; align-items: center; justify-content: center; z-index: 100;
}
.modal-card {
  background: white; width: 400px; padding: 24px;
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-md);
  animation: slideUp 0.3s ease;
}
@keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
.modal-title { font-size: 18px; font-weight: 700; margin: 0 0 16px 0; }
.form-group { margin-bottom: 16px; }
.form-group label { display: block; font-size: 13px; font-weight: 500; margin-bottom: 6px; color: var(--text-muted); }
.form-control { width: 100%; padding: 10px; border: 1px solid var(--border); border-radius: 8px; }

/* Utilities */
.hidden { display: none; }
.flex-spacer { flex: 1; }
.text-success { color: var(--success); }
.text-danger { color: var(--danger); }

/* Responsive */
@media(max-width: 1100px) {
  .app-container { grid-template-columns: 80px 1fr 0; }
  .detail-panel { display: none; } /* Hide detail on small screens for demo */
  .detail-panel.open { display: flex; position: absolute; inset: 0; z-index: 50; }
  .sidebar { align-items: center; padding: 20px 8px; }
  .nav-item span, .brand-text, .badge { display: none; }
  .menu-section h3 { display: none; }
}
</style>
</head>
<body>

<div class="app-container">
  
  <aside class="sidebar">
    <div class="brand">
      <img src="https://mlcneylnm22t.i.optimole.com/w:948/h:335/q:mauto/ig:avif/id:333301f2cf01e60c267d3b7b689a691a/https://skillsrator.com/SKILLSRATOR-LOGO-with-tagline-01.png" width:20px></div>
   

    <div>
      <div class="menu-section">
        <h3>Inbox</h3>
        <div class="nav-item active" onclick="filterPlatform('all', this)">
          <div class="nav-item-left"><i data-lucide="inbox" width="18"></i> <span>All Messages</span></div>
          <div class="badge">12</div>
        </div>
        <div class="nav-item" onclick="filterPlatform('mentions', this)">
          <div class="nav-item-left"><i data-lucide="at-sign" width="18"></i> <span>Mentions</span></div>
          <div class="badge">4</div>
        </div>
        <div class="nav-item" onclick="filterPlatform('assigned', this)">
          <div class="nav-item-left"><i data-lucide="user-check" width="18"></i> <span>Assigned to me</span></div>
        </div>
      </div>

      <div class="menu-section" style="margin-top:24px;">
        <h3>Channels</h3>
        <div class="nav-item" onclick="filterPlatform('whatsapp', this)">
          <div class="nav-item-left"><i data-lucide="message-circle" width="18" style="color:#25D366"></i> <span>WhatsApp</span></div>
        </div>
        <div class="nav-item" onclick="filterPlatform('facebook', this)">
          <div class="nav-item-left"><i data-lucide="facebook" width="18" style="color:#1877f2"></i> <span>Facebook</span></div>
        </div>
        <div class="nav-item" onclick="filterPlatform('instagram', this)">
          <div class="nav-item-left"><i data-lucide="instagram" width="18" style="color:#E1306C"></i> <span>Instagram</span></div>
        </div>
      </div>
    </div>

    <div class="flex-spacer"></div>

    <div class="nav-item">
      <div class="nav-item-left"><i data-lucide="settings" width="18"></i> <span>Settings</span></div>
    </div>
  </aside>

  <main class="main-feed">
    <div class="top-bar">
      <h2 style="font-size:18px; font-weight:700; margin:0">Inbox</h2>
      <div class="search-wrapper">
        <i data-lucide="search" class="search-icon"></i>
        <input type="text" id="searchInput" placeholder="Search leads, tags, messages...">
      </div>
    </div>

    <div style="padding: 12px 16px 0; display:flex; gap:8px;">
      <button class="btn-icon" style="width:auto; padding:0 12px; font-size:13px; background:var(--bg-panel)">Open</button>
      <button class="btn-icon" style="width:auto; padding:0 12px; font-size:13px; background:transparent; border:none;">Closed</button>
      <div class="flex-spacer"></div>
      <button class="btn-icon" title="Refresh" onclick="renderInbox()"><i data-lucide="rotate-cw" width="16"></i></button>
    </div>

    <div class="feed-list" id="inboxList">
      </div>
  </main>

  <aside class="detail-panel" id="detailPanel">
    <div class="detail-header">
      <div style="display:flex; gap:10px;">
        <button class="btn-icon" title="Mark as Done"><i data-lucide="check" width="18"></i></button>
        <button class="btn-icon" title="Snooze"><i data-lucide="clock" width="18"></i></button>
      </div>
      <div style="display:flex; gap:10px;">
        <button class="btn-icon" onclick="openModal('assignModal')" title="Assign Agent"><i data-lucide="user-plus" width="18"></i></button>
        <button class="btn-icon" onclick="openModal('invoiceModal')" title="Create Invoice"><i data-lucide="receipt" width="18"></i></button>
      </div>
    </div>

    <div id="emptyState" style="flex:1; display:flex; align-items:center; justify-content:center; flex-direction:column; color:var(--text-light);">
      <i data-lucide="message-square" width="48" style="opacity:0.3; margin-bottom:12px"></i>
      <div>Select a conversation</div>
    </div>

    <div id="activeContent" class="hidden" style="display:flex; flex-direction:column; height:100%;">
      <div class="lead-snapshot">
        <div class="lead-header">
          <div class="lead-lg-avatar" id="leadAvatar">AB</div>
          <div>
            <div style="font-weight:700; font-size:16px;" id="leadName">Name</div>
            <div style="color:var(--text-muted); font-size:13px;" id="leadDetail">Platform • Location</div>
          </div>
        </div>
        <div class="lead-stats">
          <div class="stat-box">
            <div class="stat-label">Deal Value</div>
            <div class="stat-val text-success" id="leadValue">$0</div>
          </div>
          <div class="stat-box">
            <div class="stat-label">Pipeline Stage</div>
            <div class="stat-val" id="leadStage">New</div>
          </div>
        </div>
        <div style="margin-top:12px; display:flex; gap:6px;" id="leadTagsDisplay">
          </div>
      </div>

      <div class="chat-container" id="chatContainer">
        </div>

      <div class="composer-area">
        <div class="input-box">
          <textarea id="composer" placeholder="Type your reply... (Ctrl+Enter to send)"></textarea>
          <div class="input-actions">
            <div style="display:flex; gap:4px;">
              <button class="btn-icon" style="border:none; width:30px; height:30px;"><i data-lucide="paperclip" width="16"></i></button>
              <button class="btn-icon" style="border:none; width:30px; height:30px;"><i data-lucide="smile" width="16"></i></button>
              <button class="btn-icon" style="border:none; width:30px; height:30px;" onclick="addNote()"><i data-lucide="sticky-note" width="16"></i></button>
            </div>
            <button class="btn-primary" id="sendBtn">
              <span>Send</span> <i data-lucide="send" width="14"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </aside>

</div>

<div class="modal-overlay" id="assignModal">
  <div class="modal-card">
    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:16px">
      <h3 class="modal-title">Assign Conversation</h3>
      <button class="btn-icon" style="border:none;" onclick="closeModal('assignModal')"><i data-lucide="x" width="20"></i></button>
    </div>
    <div class="form-group">
      <label>Team Member</label>
      <select class="form-control" id="assignSelect">
        <option>Ali Haider (Sales)</option>
        <option>Sara Khan (Support)</option>
      </select>
    </div>
    <div style="display:flex; justify-content:flex-end; gap:8px;">
      <button class="btn-icon" style="width:auto; padding:0 16px;" onclick="closeModal('assignModal')">Cancel</button>
      <button class="btn-primary" onclick="confirmAssign()">Assign</button>
    </div>
  </div>
</div>

<div class="modal-overlay" id="invoiceModal">
  <div class="modal-card">
    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:16px">
      <h3 class="modal-title">Generate Invoice</h3>
      <button class="btn-icon" style="border:none;" onclick="closeModal('invoiceModal')"><i data-lucide="x" width="20"></i></button>
    </div>
    <div class="form-group">
      <label>Amount ($)</label>
      <input type="number" class="form-control" value="150.00">
    </div>
    <div class="form-group">
      <label>Description</label>
      <input type="text" class="form-control" placeholder="Consultation fee...">
    </div>
    <div style="display:flex; justify-content:flex-end; gap:8px;">
      <button class="btn-icon" style="width:auto; padding:0 16px;" onclick="closeModal('invoiceModal')">Cancel</button>
      <button class="btn-primary" onclick="alert('Invoice Sent!'); closeModal('invoiceModal');">Create & Send</button>
    </div>
  </div>
</div>

<script>
// --- Data ---
const chats = [
  { id: 1, name: "Aisha Rizvi", platform: "facebook", time: "10m", text: "Is the pricing negotiable for the enterprise plan?", unread: true, stage: "Negotiation", value: "$1,200", tags: ["Hot", "Enterprise"], msgs: [
    { type: "in", text: "Hi, I'm looking at the Enterprise plan." },
    { type: "out", text: "Hello Aisha! Yes, it includes full support." },
    { type: "in", text: "Is the pricing negotiable for the enterprise plan?" }
  ]},
  { id: 2, name: "Bilal Khan", platform: "whatsapp", time: "1h", text: "Can you send the PDF brochure?", unread: false, stage: "Inquiry", value: "$200", tags: ["New"], msgs: [
    { type: "in", text: "Hi, saw your ad on IG." },
    { type: "in", text: "Can you send the PDF brochure?" }
  ]},
  { id: 3, name: "Sarah Jenkins", platform: "instagram", time: "3h", text: "Thanks, I will check it out.", unread: false, stage: "Closed", value: "$0", tags: [], msgs: [
    { type: "in", text: "Where are you located?" },
    { type: "out", text: "We are strictly online, Sarah." },
    { type: "in", text: "Thanks, I will check it out." }
  ]},
  { id: 4, name: "Tech Solutions Ltd", platform: "linkedin", time: "1d", text: "Let's schedule a demo call.", unread: true, stage: "Demo", value: "$5,000", tags: ["B2B"], msgs: [
    { type: "in", text: "We need a solution for our sales team." },
    { type: "out", text: "We can help with that. When are you free?" },
    { type: "in", text: "Let's schedule a demo call." }
  ]}
];

const platformIcons = {
  facebook: { icon: 'facebook', color: '#1877f2' },
  instagram: { icon: 'instagram', color: '#E1306C' },
  whatsapp: { icon: 'message-circle', color: '#25D366' },
  linkedin: { icon: 'linkedin', color: '#0077b5' }
};

let currentChatId = null;
let currentFilter = 'all';

// --- Functions ---

function init() {
  lucide.createIcons();
  renderInbox();
}

function renderInbox() {
  const list = document.getElementById('inboxList');
  const search = document.getElementById('searchInput').value.toLowerCase();
  
  list.innerHTML = '';
  
  const filtered = chats.filter(c => {
    if(currentFilter !== 'all' && c.platform !== currentFilter) return false;
    if(search && !c.name.toLowerCase().includes(search) && !c.text.toLowerCase().includes(search)) return false;
    return true;
  });

  filtered.forEach(chat => {
    const pInfo = platformIcons[chat.platform] || {icon:'message-square', color:'#666'};
    const el = document.createElement('div');
    el.className = `conv-card ${chat.unread ? 'unread' : ''} ${chat.id === currentChatId ? 'active' : ''}`;
    el.onclick = () => loadChat(chat.id);
    
    // Tags HTML
    const tagsHtml = chat.tags.map(t => `<span class="mini-tag">${t}</span>`).join('');
    
    el.innerHTML = `
      <div class="avatar">
        ${getInitials(chat.name)}
        <div class="platform-badge" style="color:${pInfo.color}">
          <i data-lucide="${pInfo.icon}" width="12" height="12"></i>
        </div>
      </div>
      <div class="conv-content">
        <div class="conv-header">
          <span class="conv-name">${chat.name}</span>
          <span class="conv-time">${chat.time}</span>
        </div>
        <div class="conv-preview">${chat.text}</div>
        <div class="tags-row">${tagsHtml}</div>
      </div>
    `;
    list.appendChild(el);
  });
  lucide.createIcons();
}

function loadChat(id) {
  currentChatId = id;
  const chat = chats.find(c => c.id === id);
  chat.unread = false; // mark read
  
  // Update UI state
  document.getElementById('emptyState').style.display = 'none';
  document.getElementById('activeContent').style.display = 'flex';
  document.getElementById('activeContent').classList.remove('hidden');
  
  // Lead Header
  document.getElementById('leadName').innerText = chat.name;
  document.getElementById('leadAvatar').innerText = getInitials(chat.name);
  document.getElementById('leadDetail').innerText = `${capitalize(chat.platform)} • Active ${chat.time} ago`;
  document.getElementById('leadValue').innerText = chat.value;
  document.getElementById('leadStage').innerText = chat.stage;
  
  const tagsContainer = document.getElementById('leadTagsDisplay');
  tagsContainer.innerHTML = chat.tags.map(t => `<span class="mini-tag" style="background:#eef2ff; color:var(--primary); border-color:transparent">${t}</span>`).join('');

  // Messages
  const container = document.getElementById('chatContainer');
  container.innerHTML = '';
  
  chat.msgs.forEach(msg => {
    const row = document.createElement('div');
    row.className = `message-group ${msg.type}`;
    row.innerHTML = `
      <div class="bubble">${msg.text}</div>
      ${msg.type === 'in' ? '<div class="msg-meta">Read 10:45 AM</div>' : ''}
    `;
    container.appendChild(row);
  });
  
  // Scroll to bottom
  container.scrollTop = container.scrollHeight;
  renderInbox(); // refresh list to remove unread marker
}

function sendMessage() {
  const input = document.getElementById('composer');
  const text = input.value.trim();
  if(!text || !currentChatId) return;
  
  const chat = chats.find(c => c.id === currentChatId);
  chat.msgs.push({ type: 'out', text: text });
  chat.text = "You: " + text;
  
  input.value = '';
  loadChat(currentChatId);
}

function addNote() {
  if(!currentChatId) return;
  const note = prompt("Add an internal note:");
  if(note) {
    const container = document.getElementById('chatContainer');
    const div = document.createElement('div');
    div.style.cssText = "align-self:center; background:#fffbeb; color:#92400e; padding:6px 12px; border-radius:8px; font-size:12px; margin:10px 0; border:1px solid #fcd34d";
    div.innerHTML = `<strong>Note:</strong> ${note}`;
    container.appendChild(div);
    container.scrollTop = container.scrollHeight;
  }
}

// --- Helpers ---
function getInitials(name) {
  return name.split(' ').map(n => n[0]).slice(0,2).join('');
}
function capitalize(s) {
  return s.charAt(0).toUpperCase() + s.slice(1);
}
function filterPlatform(p, el) {
  currentFilter = p;
  document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
  el.classList.add('active');
  renderInbox();
}
function openModal(id) { document.getElementById(id).style.display = 'flex'; }
function closeModal(id) { document.getElementById(id).style.display = 'none'; }
function confirmAssign() {
  const agent = document.getElementById('assignSelect').value;
  alert(`Assigned to ${agent}`);
  closeModal('assignModal');
}

// --- Event Listeners ---
document.getElementById('searchInput').addEventListener('input', renderInbox);
document.getElementById('sendBtn').addEventListener('click', sendMessage);
document.getElementById('composer').addEventListener('keypress', (e) => {
  if(e.key === 'Enter' && e.ctrlKey) sendMessage();
});

// Run
init();

</script>
</body>
</html>
